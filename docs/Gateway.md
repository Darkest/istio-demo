# Рекомендации по использованию ресурса Gateway в Service Mesh

Для минимизации рисков мисконфигурации взаимодействий внутри кластера необходимо однозначно различать все сервисы Ingress и Egress во всех неймспейсах кластера.
Главная причина этого - невозможность локального применения ресурса Gateway внутри пользовательского неймсппейса, что соответственно порождает возможность как случайной(в случае если метки Ingress и Egress в разных неймспейсах пересекаются), так и преднамеренной конфигурации Ingress и Egress соседних неймспейсов.
Крайне рекомендуется
1. Добавить в Deployment Ingress и Egress в дополнение метки istio:<имя ресурса>, также метку типа ns:<название неймспейса в котором развернут ресурс>
2. Для каждого сервиса использовать свои уникальные порты ресурса Gateway для настройки Ingress и Egress.

## Настраиваем сквозной доступ к ресурсам через OpenShift Service Mesh

Давайте разберем по шагам настройку следующего взаимодействия 

Client -> OpenShift CLuster -> Service Mesh -> Web API

Более подробно наша схема взаимодействия будет выглядеть так:

Client -> OpenShift Route -> Ingress Gateway -> Egress Gateway -> Service Entry -> Web API

### Настройка OpenShift Route
Route в кластере OpenShift служит для проброса запросов снаружи кластера на определенные сервисы k8s, в нашем случае на Ingress Gateway прикладного неймспейса Service Mesh

Для начала нам необходимо создать Route 